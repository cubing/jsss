!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.Scrambo=e()}}(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){var generate_NNN_scrambler=function(size,seqlen,mult){return function(){var numcub=1;var cubeorient=false;var seq=[];function appendmoves(sq,axsl,tl,la){for(var sl=0;sl<tl;sl++){if(axsl[sl]){var q=axsl[sl]-1;var sa=la;var m=sl;if(sl+sl+1>=tl){sa+=3;m=tl-1-m;q=2-q}sq[sq.length]=(m*6+sa)*4+q}}}function scramble(){var tl=size;if(mult||(size&1)!=0)tl--;var axsl=new Array(tl);var axam=new Array(0,0,0);var la;for(var n=0;n<numcub;n++){la=-1;seq[n]=[];for(var i=0;i<tl;i++)axsl[i]=0;axam[0]=axam[1]=axam[2]=0;var moved=0;while(seq[n].length+moved<seqlen){var ax,sl,q;do{do{ax=Math.floor(randomSource.random()*3);sl=Math.floor(randomSource.random()*tl);q=Math.floor(randomSource.random()*3)}while(ax===la&&axsl[sl]!=0)}while(ax===la&&!mult&&tl===size&&(2*axam[0]===tl||2*axam[1]===tl||2*axam[2]===tl||2*(axam[q]+1)===tl&&axam[0]+axam[1]+axam[2]-axam[q]>0));if(ax!=la){appendmoves(seq[n],axsl,tl,la);for(var i=0;i<tl;i++)axsl[i]=0;axam[0]=axam[1]=axam[2]=0;moved=0;la=ax}axam[q]++;moved++;axsl[sl]=q+1}appendmoves(seq[n],axsl,tl,la);seq[n][seq[n].length]=cubeorient?Math.floor(randomSource.random()*24):0}}function scramblestring(n){var s="",j;for(var i=0;i<seq[n].length-1;i++){if(i!=0)s+=" ";var k=seq[n][i]>>2;j=k%6;k=(k-j)/6;if(k&&size<=5&&!mult){s+="dlburf".charAt(j)}else{if(size<=5&&mult){s+="DLBURF".charAt(j);if(k)s+="w"}else{if(k)s+=k+1;s+="DLBURF".charAt(j)}}j=seq[n][i]&3;if(j!=0)s+=" 2'".charAt(j)}if(cubeorient){var ori=seq[n][seq[n].length-1];s="Top:"+colorList[2+colors[colorPerm[ori][3]]]+"&nbsp;&nbsp;&nbsp;Front:"+colorList[2+colors[colorPerm[ori][5]]]+"<br>"+s}return s}var randomSource;var setRandomSource=function(src){randomSource=src};var getRandomScramble=function(){scramble();return{scramble_string:scramblestring(0)}};var initializeFull=function(continuation,iniRandomSource){setRandomSource(iniRandomSource)};return{initialize:initializeFull,setRandomSource:setRandomSource,getRandomScramble:getRandomScramble}}()};module.exports["222"]=generate_NNN_scrambler(2,20,true);module.exports["333"]=generate_NNN_scrambler(3,30,true);module.exports["444"]=generate_NNN_scrambler(4,40,true);module.exports["555"]=generate_NNN_scrambler(5,60,true);module.exports["666"]=generate_NNN_scrambler(6,70,true);module.exports["777"]=generate_NNN_scrambler(7,100,true)},{}],2:[function(_dereq_,module,exports){scrambler=function(){function getRandomScramble(){var posit=new Array(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var p="dU";var pegs=[0,0,0,0];var seq=[];var i,j;for(i=0;i<14;i++){seq[i]=Math.floor(randomSource.random()*12)-5}var scrambleString="";var turnToString=function(turn,amount){var suffix;if(amount===0){return""}else if(amount===1){suffix=""}else if(amount===-1){suffix="'"}else if(amount>=0){suffix=""+amount+""}else{suffix=""+-amount+"'"}return" "+turn+suffix};var addToScrambleString=function(pegs,UAmount,dAmount){scrambleString+="["+pegs+"]"+turnToString("U",UAmount)+turnToString("d",dAmount)+" "};addToScrambleString("UU/dd",seq[0],seq[4]);addToScrambleString("dU/dU",seq[1],seq[5]);addToScrambleString("dd/UU",seq[2],seq[6]);addToScrambleString("Ud/Ud",seq[3],seq[7]);addToScrambleString("dU/UU",seq[8],0);addToScrambleString("Ud/UU",seq[9],0);addToScrambleString("UU/Ud",seq[10],0);addToScrambleString("UU/dU",seq[11],0);addToScrambleString("UU/UU",seq[12],0);addToScrambleString("dd/dd",0,seq[13]);addToScrambleString(p[pegs[0]]+p[pegs[1]]+"/"+p[pegs[2]]+p[pegs[3]],0,0);return{scramble_string:scrambleString}}var randomSource;var setRandomSource=function(src){randomSource=src};var initializeFull=function(continuation,iniRandomSource){setRandomSource(iniRandomSource);if(continuation){setTimeout(continuation,0)}};return{initialize:initializeFull,setRandomSource:setRandomSource,getRandomScramble:getRandomScramble}}();module.exports=scrambler},{}],3:[function(_dereq_,module,exports){scrambler=function(){var linelen=10;var linenbr=7;var permU=[4,0,1,2,3,9,5,6,7,8,10,11,12,13,58,59,16,17,18,63,20,21,22,23,24,14,15,27,28,29,19,31,32,33,34,35,25,26,38,39,40,30,42,43,44,45,46,36,37,49,50,51,41,53,54,55,56,57,47,48,60,61,62,52,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131];var permUi=[1,2,3,4,0,6,7,8,9,5,10,11,12,13,25,26,16,17,18,30,20,21,22,23,24,36,37,27,28,29,41,31,32,33,34,35,47,48,38,39,40,52,42,43,44,45,46,58,59,49,50,51,63,53,54,55,56,57,14,15,60,61,62,19,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131];var permD2=[0,1,2,3,4,5,6,7,8,9,10,33,34,35,14,15,38,39,40,19,42,43,44,45,46,25,26,49,50,51,30,53,54,55,56,57,36,37,60,61,62,41,64,65,11,12,13,47,48,16,17,18,52,20,21,22,23,24,58,59,27,28,29,63,31,32,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,124,125,121,122,123,129,130,126,127,128,131];var permD2i=[0,1,2,3,4,5,6,7,8,9,10,44,45,46,14,15,49,50,51,19,53,54,55,56,57,25,26,60,61,62,30,64,65,11,12,13,36,37,16,17,18,41,20,21,22,23,24,47,48,27,28,29,52,31,32,33,34,35,58,59,38,39,40,63,42,43,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,123,124,125,121,122,128,129,130,126,127,131];var permR2=[81,77,78,3,4,86,82,83,8,85,87,122,123,124,125,121,127,128,129,130,126,131,89,90,24,25,88,94,95,29,97,93,98,33,34,35,36,37,38,39,40,41,42,43,44,26,22,23,48,30,31,27,28,53,32,69,70,66,67,68,74,75,71,72,73,76,101,102,103,99,100,106,107,108,104,105,109,46,47,79,80,45,51,52,84,49,50,54,0,1,2,91,92,5,6,7,96,9,10,15,11,12,13,14,20,16,17,18,19,21,113,114,110,111,112,118,119,115,116,117,120,55,56,57,58,59,60,61,62,63,64,65];var permR2i=[88,89,90,3,4,93,94,95,8,97,98,100,101,102,103,99,105,106,107,108,104,109,46,47,24,25,45,51,52,29,49,50,54,33,34,35,36,37,38,39,40,41,42,43,44,81,77,78,48,85,86,82,83,53,87,121,122,123,124,125,126,127,128,129,130,131,57,58,59,55,56,62,63,64,60,61,65,1,2,79,80,0,6,7,84,9,5,10,26,22,23,91,92,31,27,28,96,30,32,69,70,66,67,68,74,75,71,72,73,76,112,113,114,110,111,117,118,119,115,116,120,15,11,12,13,14,20,16,17,18,19,21];function applyMove(state,movePerm){var stateNew=[];for(var i=0;i<11*12;i++){stateNew[i]=state[movePerm[i]]}return stateNew}function getRandomScramble(){var i;var seq=[];for(i=0;i<linenbr*linelen;i++){seq[i]=Math.floor(randomSource.random()*2)}var s="",i,j;for(j=0;j<linenbr;j++){for(i=0;i<linelen;i++){if(i%2){if(seq[j*linelen+i]){s+="D++ "}else{s+="D-- "}}else{if(seq[j*linelen+i]){s+="R++ "}else{s+="R-- "}}}if(seq[(j+1)*linelen-1]){s+="U"}else{s+="U'"}if(j<linenbr-1){s+="\n"}}return{scramble_string:s}}var randomSource;var setRandomSource=function(src){randomSource=src};var initializeFull=function(continuation,iniRandomSource){setRandomSource(iniRandomSource);if(continuation){setTimeout(continuation,0)}};return{initialize:initializeFull,setRandomSource:setRandomSource,getRandomScramble:getRandomScramble}}();module.exports=scrambler},{}],4:[function(_dereq_,module,exports){scrambler=function(){var numcub=1;var seq=[];var scramblestring=[];function scramble(){var i,j,n,ls,t;for(n=0;n<numcub;n++){initbrd();dosolve();scramblestring[n]="";for(i=0;i<sol.length;i++){scramblestring[n]+=["U","L","R","B"][sol[i]&7]+["","'"][(sol[i]&8)/8]+" "}var tips=["l","r","b","u"];for(i=0;i<4;i++){var j=Math.floor(randomSource.random()*3);if(j<2){scramblestring[n]+=tips[i]+["","'"][j]+" "}}}}var posit=[];var mode;var edt;var perm=[];var twst=[];var permmv=[];var twstmv=[];var sol=[];var pcperm=[];var pcori=[];var soltimer;function initbrd(){if(mode==4)clearTimeout(soltimer);posit=[0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3];mode=0;sol.length=0}function solved(){for(var i=1;i<9;i++){if(posit[i]!=posit[0])return false;if(posit[i+9]!=posit[9])return false;if(posit[i+18]!=posit[18])return false;if(posit[i+27]!=posit[27])return false}return true}var edges=[2,11,1,20,4,31,10,19,13,29,22,28];var movelist=[];movelist[0]=[0,18,9,6,24,15,1,19,11,2,20,10];movelist[1]=[23,3,30,26,7,34,22,1,31,20,4,28];movelist[2]=[5,14,32,8,17,35,4,11,29,2,13,31];movelist[3]=[12,21,27,16,25,33,13,19,28,10,22,29];function domove(m){for(var i=0;i<movelist[m].length;i+=3){var c=posit[movelist[m][i]];posit[movelist[m][i]]=posit[movelist[m][i+2]];posit[movelist[m][i+2]]=posit[movelist[m][i+1]];posit[movelist[m][i+1]]=c}}function dosolve(){var a,b,c,l,t=0,q=0;var parity=0;pcperm=[0,1,2,3,4,5];for(var i=0;i<4;i++){var other=i+Math.floor((6-i)*randomSource.random());var temp=pcperm[i];pcperm[i]=pcperm[other];pcperm[other]=temp;if(i!=other)parity++}if(parity%2==1){var temp=pcperm[4];pcperm[4]=pcperm[5];pcperm[5]=temp}parity=0;pcori=[];for(var i=0;i<5;i++){pcori[i]=Math.floor(2*randomSource.random());parity+=pcori[i]}pcori[5]=parity%2;for(var i=6;i<10;i++){pcori[i]=Math.floor(3*randomSource.random())}for(a=0;a<6;a++){b=0;for(c=0;c<6;c++){if(pcperm[c]==a)break;if(pcperm[c]>a)b++}q=q*(6-a)+b}for(a=9;a>=6;a--){t=t*3+pcori[a]}for(a=4;a>=0;a--){t=t*2+pcori[a]}if(q!=0||t!=0){for(l=7;l<12;l++){if(search(q,t,l,-1))break}}}function search(q,t,l,lm){if(l==0){if(q==0&&t==0){return true}}else{if(perm[q]>l||twst[t]>l)return false;var p,s,a,m;for(m=0;m<4;m++){if(m!=lm){p=q;s=t;for(a=0;a<2;a++){p=permmv[p][m];s=twstmv[s][m];sol[sol.length]=m+8*a;if(search(p,s,l-1,m))return true;sol.length--}}}}return false}function calcperm(){var c,p,q,l,m,n;for(p=0;p<720;p++){perm[p]=-1;permmv[p]=[];for(m=0;m<4;m++){permmv[p][m]=getprmmv(p,m)}}perm[0]=0;for(l=0;l<=6;l++){n=0;for(p=0;p<720;p++){if(perm[p]==l){for(m=0;m<4;m++){q=p;for(c=0;c<2;c++){q=permmv[q][m];if(perm[q]==-1){perm[q]=l+1;n++}}}}}}for(p=0;p<2592;p++){twst[p]=-1;twstmv[p]=[];for(m=0;m<4;m++){twstmv[p][m]=gettwsmv(p,m)}}twst[0]=0;for(l=0;l<=5;l++){n=0;for(p=0;p<2592;p++){if(twst[p]==l){for(m=0;m<4;m++){q=p;for(c=0;c<2;c++){q=twstmv[q][m];if(twst[q]==-1){twst[q]=l+1;n++}}}}}}}function getprmmv(p,m){var a,b,c;var ps=[];var q=p;for(a=1;a<=6;a++){c=Math.floor(q/a);b=q-a*c;q=c;for(c=a-1;c>=b;c--)ps[c+1]=ps[c];ps[b]=6-a}if(m==0){cycle3(ps,0,3,1)}else if(m==1){cycle3(ps,1,5,2)}else if(m==2){cycle3(ps,0,2,4)}else if(m==3){cycle3(ps,3,4,5)}q=0;for(a=0;a<6;a++){b=0;for(c=0;c<6;c++){if(ps[c]==a)break;if(ps[c]>a)b++}q=q*(6-a)+b}return q}function gettwsmv(p,m){var a,b,c,d=0;var ps=[];var q=p;for(a=0;a<=4;a++){ps[a]=q&1;q>>=1;d^=ps[a]}ps[5]=d;for(a=6;a<=9;a++){c=Math.floor(q/3);b=q-3*c;q=c;ps[a]=b}if(m==0){ps[6]++;if(ps[6]==3)ps[6]=0;cycle3(ps,0,3,1);ps[1]^=1;ps[3]^=1}else if(m==1){ps[7]++;if(ps[7]==3)ps[7]=0;cycle3(ps,1,5,2);ps[2]^=1;ps[5]^=1}else if(m==2){ps[8]++;if(ps[8]==3)ps[8]=0;cycle3(ps,0,2,4);ps[0]^=1;ps[2]^=1}else if(m==3){ps[9]++;if(ps[9]==3)ps[9]=0;cycle3(ps,3,4,5);ps[3]^=1;ps[4]^=1}q=0;for(a=9;a>=6;a--){q=q*3+ps[a]}for(a=4;a>=0;a--){q=q*2+ps[a]}return q}function cycle3(arr,i1,i2,i3){var c=arr[i1];arr[i1]=arr[i2];arr[i2]=arr[i3];arr[i3]=c}var randomSource;var setRandomSource=function(src){randomSource=src};var getRandomScramble=function(){scramble();return{scramble_string:scramblestring[0]}};var initializeFull=function(continuation,iniRandomSource){setRandomSource(iniRandomSource);calcperm();if(continuation){setTimeout(continuation,0)}};return{initialize:initializeFull,setRandomSource:setRandomSource,getRandomScramble:getRandomScramble}}();module.exports=scrambler},{}],5:[function(_dereq_,module,exports){scrambler=function(){function nullMethod(){}function FullCube_copy(obj,c){obj.ul=c.ul;obj.ur=c.ur;obj.dl=c.dl;obj.dr=c.dr;obj.ml=c.ml}function FullCube_doMove(obj,move){var temp;move<<=2;if(move>24){move=48-move;temp=obj.ul;obj.ul=(~~obj.ul>>move|obj.ur<<24-move)&16777215;obj.ur=(~~obj.ur>>move|temp<<24-move)&16777215}else if(move>0){temp=obj.ul;obj.ul=(obj.ul<<move|~~obj.ur>>24-move)&16777215;obj.ur=(obj.ur<<move|~~temp>>24-move)&16777215}else if(move==0){temp=obj.ur;obj.ur=obj.dl;obj.dl=temp;obj.ml=1-obj.ml}else if(move>=-24){move=-move;temp=obj.dl;obj.dl=(obj.dl<<move|~~obj.dr>>24-move)&16777215;obj.dr=(obj.dr<<move|~~temp>>24-move)&16777215}else if(move<-24){move=48+move;temp=obj.dl;obj.dl=(~~obj.dl>>move|obj.dr<<24-move)&16777215;obj.dr=(~~obj.dr>>move|temp<<24-move)&16777215}}function FullCube_getParity(obj){var a,b,cnt,i,p;cnt=0;obj.arr[0]=FullCube_pieceAt(obj,0);for(i=1;i<24;++i){FullCube_pieceAt(obj,i)!=obj.arr[cnt]&&(obj.arr[++cnt]=FullCube_pieceAt(obj,i))}p=0;for(a=0;a<16;++a){for(b=a+1;b<16;++b){obj.arr[a]>obj.arr[b]&&(p^=1)}}return p}function FullCube_getShapeIdx(obj){var dlx,drx,ulx,urx;urx=obj.ur&1118481;urx|=~~urx>>3;urx|=~~urx>>6;urx=urx&15|~~urx>>12&48;ulx=obj.ul&1118481;ulx|=~~ulx>>3;ulx|=~~ulx>>6;ulx=ulx&15|~~ulx>>12&48;drx=obj.dr&1118481;drx|=~~drx>>3;drx|=~~drx>>6;drx=drx&15|~~drx>>12&48;dlx=obj.dl&1118481;dlx|=~~dlx>>3;dlx|=~~dlx>>6;dlx=dlx&15|~~dlx>>12&48;return Shape_getShape2Idx(FullCube_getParity(obj)<<24|ulx<<18|urx<<12|dlx<<6|drx)}function FullCube_getSquare(obj,sq){var a,b;for(a=0;a<8;++a){obj.prm[a]=~~(~~FullCube_pieceAt(obj,a*3+1)>>1<<24)>>24}sq.cornperm=get8Perm(obj.prm);sq.topEdgeFirst=FullCube_pieceAt(obj,0)==FullCube_pieceAt(obj,1);a=sq.topEdgeFirst?2:0;for(b=0;b<4;a+=3,++b)obj.prm[b]=~~(~~FullCube_pieceAt(obj,a)>>1<<24)>>24;sq.botEdgeFirst=FullCube_pieceAt(obj,12)==FullCube_pieceAt(obj,13);a=sq.botEdgeFirst?14:12;for(;b<8;a+=3,++b)obj.prm[b]=~~(~~FullCube_pieceAt(obj,a)>>1<<24)>>24;sq.edgeperm=get8Perm(obj.prm);sq.ml=obj.ml}function FullCube_pieceAt(obj,idx){var ret;idx<6?ret=~~obj.ul>>(5-idx<<2):idx<12?ret=~~obj.ur>>(11-idx<<2):idx<18?ret=~~obj.dl>>(17-idx<<2):ret=~~obj.dr>>(23-idx<<2);return~~((ret&15)<<24)>>24}function FullCube_setPiece(obj,idx,value){if(idx<6){obj.ul&=~(15<<(5-idx<<2));obj.ul|=value<<(5-idx<<2)}else if(idx<12){obj.ur&=~(15<<(11-idx<<2));obj.ur|=value<<(11-idx<<2)}else if(idx<18){obj.dl&=~(15<<(17-idx<<2));obj.dl|=value<<(17-idx<<2)}else{obj.dr&=~(15<<(23-idx<<2));obj.dr|=value<<(23-idx<<2)}}function FullCube_FullCube__Ljava_lang_String_2V(){this.arr=[];this.prm=[]}function FullCube_randomCube(){var f,i,shape,edge,corner,n_edge,n_corner,rnd,m;f=new FullCube_FullCube__Ljava_lang_String_2V;shape=Shape_ShapeIdx[~~(square1SolverRandomSource.random()*3678)];corner=19088743<<1|286331153;edge=19088743<<1;n_corner=n_edge=8;for(i=0;i<24;i++){if((shape>>i&1)==0){rnd=~~(square1SolverRandomSource.random()*n_edge)<<2;FullCube_setPiece(f,23-i,edge>>rnd&15);m=(1<<rnd)-1;edge=(edge&m)+(edge>>4&~m);--n_edge}else{rnd=~~(square1SolverRandomSource.random()*n_corner)<<2;FullCube_setPiece(f,23-i,corner>>rnd&15);FullCube_setPiece(f,22-i,corner>>rnd&15);m=(1<<rnd)-1;corner=(corner&m)+(corner>>4&~m);--n_corner;++i}}f.ml=~~(square1SolverRandomSource.random()*2);return f}function FullCube(){}_=FullCube_FullCube__Ljava_lang_String_2V.prototype=FullCube.prototype;_.dl=10062778;_.dr=14536702;_.ml=0;_.ul=70195;_.ur=4544119;var FullCube_gen;function Search_init2(obj){var corner,edge,i,j,ml,prun;FullCube_copy(obj.Search_d,obj.Search_c);for(i=0;i<obj.Search_length1;++i){FullCube_doMove(obj.Search_d,obj.Search_move[i])}FullCube_getSquare(obj.Search_d,obj.Search_sq);edge=obj.Search_sq.edgeperm;corner=obj.Search_sq.cornperm;ml=obj.Search_sq.ml;prun=Math.max(SquarePrun[obj.Search_sq.edgeperm<<1|ml],SquarePrun[obj.Search_sq.cornperm<<1|ml]);for(i=prun;i<obj.Search_maxlen2;++i){if(Search_phase2(obj,edge,corner,obj.Search_sq.topEdgeFirst,obj.Search_sq.botEdgeFirst,ml,i,obj.Search_length1,0)){for(j=0;j<i;++j){FullCube_doMove(obj.Search_d,obj.Search_move[obj.Search_length1+j])}obj.Search_sol_string=Search_move2string(obj,i+obj.Search_length1);return true}}return false}function Search_move2string(obj,len){var s="";var top=0,bottom=0;for(var i=len-1;i>=0;i--){var val=obj.Search_move[i];if(val>0){val=12-val;top=val>6?val-12:val}else if(val<0){val=12+val;bottom=val>6?val-12:val}else{if(top==0&&bottom==0){s+=" / "}else{s+="("+top+", "+bottom+") / "}top=bottom=0}}if(top==0&&bottom==0){}else{s+="("+top+", "+bottom+")"}return s}function Search_phase1(obj,shape,prunvalue,maxl,depth,lm){var m,prunx,shapex;if(prunvalue==0&&maxl<4){return maxl==0&&Search_init2(obj)}if(lm!=0){shapex=Shape_TwistMove[shape];prunx=ShapePrun[shapex];if(prunx<maxl){obj.Search_move[depth]=0;if(Search_phase1(obj,shapex,prunx,maxl-1,depth+1,0)){return true}}}shapex=shape;if(lm<=0){m=0;while(true){m+=Shape_TopMove[shapex];shapex=~~m>>4;m&=15;if(m>=12){break}prunx=ShapePrun[shapex];if(prunx>maxl){break}else if(prunx<maxl){obj.Search_move[depth]=m;if(Search_phase1(obj,shapex,prunx,maxl-1,depth+1,1)){return true}}}}shapex=shape;if(lm<=1){m=0;while(true){m+=Shape_BottomMove[shapex];shapex=~~m>>4;m&=15;if(m>=6){break}prunx=ShapePrun[shapex];if(prunx>maxl){break}else if(prunx<maxl){obj.Search_move[depth]=-m;if(Search_phase1(obj,shapex,prunx,maxl-1,depth+1,2)){return true}}}}return false}function Search_phase2(obj,edge,corner,topEdgeFirst,botEdgeFirst,ml,maxl,depth,lm){var botEdgeFirstx,cornerx,edgex,m,prun1,prun2,topEdgeFirstx;if(maxl==0&&!topEdgeFirst&&botEdgeFirst){return true}if(lm!=0&&topEdgeFirst==botEdgeFirst){edgex=Square_TwistMove[edge];cornerx=Square_TwistMove[corner];if(SquarePrun[edgex<<1|1-ml]<maxl&&SquarePrun[cornerx<<1|1-ml]<maxl){obj.Search_move[depth]=0;if(Search_phase2(obj,edgex,cornerx,topEdgeFirst,botEdgeFirst,1-ml,maxl-1,depth+1,0)){return true}}}if(lm<=0){topEdgeFirstx=!topEdgeFirst;edgex=topEdgeFirstx?Square_TopMove[edge]:edge;cornerx=topEdgeFirstx?corner:Square_TopMove[corner];m=topEdgeFirstx?1:2;prun1=SquarePrun[edgex<<1|ml];prun2=SquarePrun[cornerx<<1|ml];while(m<12&&prun1<=maxl&&prun1<=maxl){if(prun1<maxl&&prun2<maxl){obj.Search_move[depth]=m;if(Search_phase2(obj,edgex,cornerx,topEdgeFirstx,botEdgeFirst,ml,maxl-1,depth+1,1)){return true}}topEdgeFirstx=!topEdgeFirstx;if(topEdgeFirstx){edgex=Square_TopMove[edgex];prun1=SquarePrun[edgex<<1|ml];m+=1}else{cornerx=Square_TopMove[cornerx];prun2=SquarePrun[cornerx<<1|ml];m+=2}}}if(lm<=1){botEdgeFirstx=!botEdgeFirst;edgex=botEdgeFirstx?Square_BottomMove[edge]:edge;cornerx=botEdgeFirstx?corner:Square_BottomMove[corner];m=botEdgeFirstx?1:2;prun1=SquarePrun[edgex<<1|ml];prun2=SquarePrun[cornerx<<1|ml];while(m<(maxl>3?6:12)&&prun1<=maxl&&prun1<=maxl){if(prun1<maxl&&prun2<maxl){obj.Search_move[depth]=-m;if(Search_phase2(obj,edgex,cornerx,topEdgeFirst,botEdgeFirstx,ml,maxl-1,depth+1,2)){return true}}botEdgeFirstx=!botEdgeFirstx;if(botEdgeFirstx){edgex=Square_BottomMove[edgex];prun1=SquarePrun[edgex<<1|ml];m+=1}else{cornerx=Square_BottomMove[cornerx];prun2=SquarePrun[cornerx<<1|ml];m+=2}}}return false}function Search_solution(obj,c){var shape;obj.Search_c=c;shape=FullCube_getShapeIdx(c);for(obj.Search_length1=ShapePrun[shape];obj.Search_length1<100;++obj.Search_length1){obj.Search_maxlen2=Math.min(31-obj.Search_length1,17);if(Search_phase1(obj,shape,ShapePrun[shape],obj.Search_length1,0,-1)){break}}return obj.Search_sol_string}function Search_Search(){this.Search_move=[];this.Search_d=new FullCube_FullCube__Ljava_lang_String_2V;this.Search_sq=new Square_Square}function Search(){}_=Search_Search.prototype=Search.prototype;_.Search_c=null;_.Search_length1=0;_.Search_maxlen2=0;_.Search_sol_string=null;function Shape_$clinit(){Shape_$clinit=nullMethod;Shape_halflayer=[0,3,6,12,15,24,27,30,48,51,54,60,63];Shape_ShapeIdx=[];ShapePrun=[];Shape_TopMove=[];Shape_BottomMove=[];Shape_TwistMove=[];Shape_init()}function Shape_bottomMove(obj){var move,moveParity;move=0;moveParity=0;do{if((obj.bottom&2048)==0){move+=1;obj.bottom=obj.bottom<<1}else{move+=2;obj.bottom=obj.bottom<<2^12291}moveParity=1-moveParity}while((bitCount(obj.bottom&63)&1)!=0);(bitCount(obj.bottom)&2)==0&&(obj.Shape_parity^=moveParity);return move}function Shape_getIdx(obj){var ret;ret=binarySearch(Shape_ShapeIdx,obj.top<<12|obj.bottom)<<1|obj.Shape_parity;return ret}function Shape_setIdx(obj,idx){obj.Shape_parity=idx&1;obj.top=Shape_ShapeIdx[~~idx>>1];obj.bottom=obj.top&4095;obj.top>>=12}function Shape_topMove(obj){var move,moveParity;move=0;moveParity=0;do{if((obj.top&2048)==0){move+=1;obj.top=obj.top<<1}else{move+=2;obj.top=obj.top<<2^12291}moveParity=1-moveParity}while((bitCount(obj.top&63)&1)!=0);(bitCount(obj.top)&2)==0&&(obj.Shape_parity^=moveParity);return move}function Shape_Shape(){}function Shape_getShape2Idx(shp){var ret;ret=binarySearch(Shape_ShapeIdx,shp&16777215)<<1|~~shp>>24;return ret}function Shape_init(){var count,depth,dl,done,done0,dr,i,idx,m,s,ul,ur,value,p1,p3,temp;count=0;for(i=0;i<28561;++i){dr=Shape_halflayer[i%13];dl=Shape_halflayer[~~(i/13)%13];ur=Shape_halflayer[~~(~~(i/13)/13)%13];ul=Shape_halflayer[~~(~~(~~(i/13)/13)/13)];value=ul<<18|ur<<12|dl<<6|dr;bitCount(value)==16&&(Shape_ShapeIdx[count++]=value)}s=new Shape_Shape;for(i=0;i<7356;++i){Shape_setIdx(s,i);Shape_TopMove[i]=Shape_topMove(s);Shape_TopMove[i]|=Shape_getIdx(s)<<4;Shape_setIdx(s,i);Shape_BottomMove[i]=Shape_bottomMove(s);Shape_BottomMove[i]|=Shape_getIdx(s)<<4;Shape_setIdx(s,i);temp=s.top&63;p1=bitCount(temp);p3=bitCount(s.bottom&4032);s.Shape_parity^=1&~~(p1&p3)>>1;s.top=s.top&4032|~~s.bottom>>6&63;s.bottom=s.bottom&63|temp<<6;Shape_TwistMove[i]=Shape_getIdx(s)}for(i=0;i<7536;++i){ShapePrun[i]=-1}ShapePrun[Shape_getShape2Idx(14378715)]=0;ShapePrun[Shape_getShape2Idx(31157686)]=0;ShapePrun[Shape_getShape2Idx(23967451)]=0;ShapePrun[Shape_getShape2Idx(7191990)]=0;done=4;done0=0;depth=-1;while(done!=done0){done0=done;++depth;for(i=0;i<7536;++i){if(ShapePrun[i]==depth){m=0;idx=i;do{idx=Shape_TopMove[idx];m+=idx&15;idx>>=4;if(ShapePrun[idx]==-1){++done;ShapePrun[idx]=depth+1}}while(m!=12);m=0;idx=i;do{idx=Shape_BottomMove[idx];m+=idx&15;idx>>=4;if(ShapePrun[idx]==-1){++done;ShapePrun[idx]=depth+1}}while(m!=12);idx=Shape_TwistMove[i];if(ShapePrun[idx]==-1){++done;ShapePrun[idx]=depth+1}}}}}function Shape(){}_=Shape_Shape.prototype=Shape.prototype;_.bottom=0;_.Shape_parity=0;_.top=0;var Shape_BottomMove,Shape_ShapeIdx,ShapePrun,Shape_TopMove,Shape_TwistMove,Shape_halflayer;function Square_$clinit(){Square_$clinit=nullMethod;SquarePrun=[];Square_TwistMove=[];Square_TopMove=[];Square_BottomMove=[];fact=[1,1,2,6,24,120,720,5040];Cnk=[];for(var i=0;i<12;++i)Cnk[i]=[];Square_init()}function Square_Square(){}function get8Perm(arr){var i,idx,v,val;idx=0;val=1985229328;for(i=0;i<7;++i){v=arr[i]<<2;idx=(8-i)*idx+(~~val>>v&7);val-=286331152<<v}return idx&65535}function Square_init(){var check,depth,done,find,i,idx,idxx,inv,j,m,ml,pos,temp;for(i=0;i<12;++i){Cnk[i][0]=1;Cnk[i][i]=1;for(j=1;j<i;++j){Cnk[i][j]=Cnk[i-1][j-1]+Cnk[i-1][j]}}pos=[];for(i=0;i<40320;++i){set8Perm(pos,i);temp=pos[2];pos[2]=pos[4];pos[4]=temp;temp=pos[3];pos[3]=pos[5];pos[5]=temp;Square_TwistMove[i]=get8Perm(pos);set8Perm(pos,i);temp=pos[0];pos[0]=pos[1];pos[1]=pos[2];pos[2]=pos[3];pos[3]=temp;Square_TopMove[i]=get8Perm(pos);set8Perm(pos,i);temp=pos[4];pos[4]=pos[5];pos[5]=pos[6];pos[6]=pos[7];pos[7]=temp;Square_BottomMove[i]=get8Perm(pos)}for(i=0;i<80640;++i){SquarePrun[i]=-1}SquarePrun[0]=0;depth=0;done=1;while(done<80640){inv=depth>=11;find=inv?-1:depth;check=inv?depth:-1;++depth;OUT:for(i=0;i<80640;++i){if(SquarePrun[i]==find){idx=~~i>>1;ml=i&1;idxx=Square_TwistMove[idx]<<1|1-ml;if(SquarePrun[idxx]==check){++done;SquarePrun[inv?i:idxx]=~~(depth<<24)>>24;if(inv)continue OUT}idxx=idx;for(m=0;m<4;++m){idxx=Square_TopMove[idxx];if(SquarePrun[idxx<<1|ml]==check){++done;SquarePrun[inv?i:idxx<<1|ml]=~~(depth<<24)>>24;if(inv)continue OUT}}for(m=0;m<4;++m){idxx=Square_BottomMove[idxx];if(SquarePrun[idxx<<1|ml]==check){++done;SquarePrun[inv?i:idxx<<1|ml]=~~(depth<<24)>>24;if(inv)continue OUT}}}}}}function set8Perm(arr,idx){var i,m,p,v,val;val=1985229328;for(i=0;i<7;++i){p=fact[7-i];v=~~(idx/p);idx-=v*p;v<<=2;arr[i]=~~((~~val>>v&7)<<24)>>24;m=(1<<v)-1;val=(val&m)+(~~val>>4&~m)}arr[7]=~~(val<<24)>>24}function Square(){}_=Square_Square.prototype=Square.prototype;_.botEdgeFirst=false;_.cornperm=0;_.edgeperm=0;_.ml=0;_.topEdgeFirst=false;var Square_BottomMove,Cnk,SquarePrun,Square_TopMove,Square_TwistMove,fact;function bitCount(x){x-=~~x>>1&1431655765;x=(~~x>>2&858993459)+(x&858993459);x=(~~x>>4)+x&252645135;x+=~~x>>8;x+=~~x>>16;return x&63}function binarySearch(sortedArray,key){var high,low,mid,midVal;low=0;high=sortedArray.length-1;while(low<=high){mid=low+(~~(high-low)>>1);midVal=sortedArray[mid];if(midVal<key){low=mid+1}else if(midVal>key){high=mid-1}else{return mid}}return-low-1}var square1Solver_initialized=false;var square1SolverInitialize=function(doneCallback,iniRandomSource,statusCallback){setRandomSource(iniRandomSource);if(!square1Solver_initialized){Shape_$clinit();Square_$clinit()}if(statusCallback){statusCallback("Done initializing Square-1.")}square1Solver_initialized=true;if(doneCallback!=null){doneCallback()}};var square1SolverRandomSource;var setRandomSource=function(src){square1SolverRandomSource=src};var square1SolverGetRandomPosition=function(){if(!square1Solver_initialized){square1SolverInitialize()}return FullCube_randomCube()};var square1SolverGenerate=function(state){var search_search=new Search_Search;return Search_solution(search_search,state)};var square1SolverGetRandomScramble=function(){var randomState=square1SolverGetRandomPosition();var scrambleString=square1SolverGenerate(randomState);return{scramble_string:scrambleString}};return{initialize:square1SolverInitialize,setRandomSource:setRandomSource,getRandomScramble:square1SolverGetRandomScramble}}();module.exports=scrambler},{}],6:[function(_dereq_,module,exports){var scramblers={};scramblers=_dereq_("./scramblers/NNN.js");scramblers["clock"]=_dereq_("./scramblers/clock.js");scramblers["minx"]=_dereq_("./scramblers/minx.js");scramblers["pyram"]=_dereq_("./scramblers/pyram.js");scramblers["sq1"]=_dereq_("./scramblers/sq1.js");var Scrambo=function(t){this.t=t||"333";this.s={};this.setRandomSource(Math);this.type(this.t);return this};Scrambo.prototype.type=function(type){if(!arguments.length)return this.t;if(!scramblers.hasOwnProperty(this.t)){throw new Error("Invalid scrambler, allowed: "+Object.keys(scramblers));return}this.t=type;this.init();return this};Scrambo.prototype.get=function(num){var stack="";if(!arguments.length)return scramblers[this.t].getRandomScramble().scramble_string;for(i=0;i<num;i++){stack+=scramblers[this.t].getRandomScramble().scramble_string+"\n\n"}return stack};Scrambo.prototype.seed=function(seed){this.setRandomSource({random:function(){var x=Math.sin(seed++)*1e4;return x-Math.floor(x)}});this.init();return this};Scrambo.prototype.init=function(){scramblers[this.t].initialize(null,this.s)};Scrambo.prototype.setRandomSource=function(src){this.s=src};module.exports=Scrambo},{"./scramblers/NNN.js":1,"./scramblers/clock.js":2,"./scramblers/minx.js":3,"./scramblers/pyram.js":4,"./scramblers/sq1.js":5}]},{},[6])(6)});